<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>LED Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Segoe UI", sans-serif;
      background: #ecf0f3;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      color: #333;
    }

    .card {
      width: 100%;
      max-width: 460px;
      background: #ecf0f3;
      border-radius: 24px;
      padding: 26px 22px;
      box-shadow: 12px 12px 24px #c9ccd1,
                  -12px -12px 24px #ffffff;
    }

    h2 {
      text-align: center;
      margin-bottom: 18px;
    }

    label {
      font-size: 13px;
      margin-bottom: 6px;
      display: block;
    }

    input, select {
      width: 100%;
      padding: 12px;
      margin-bottom: 14px;
      border-radius: 18px;
      border: none;
      background: #ecf0f3;
      box-shadow: inset 5px 5px 10px #c9ccd1,
                  inset -5px -5px 10px #ffffff;
      font-size: 14px;
    }

    .row {
      display: flex;
      gap: 10px;
    }

    .row > div {
      flex: 1;
    }

    button {
      width: 100%;
      padding: 14px;
      border-radius: 18px;
      border: none;
      background: #5b8cff;
      color: #fff;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
    }

    .result {
      margin-top: 18px;
      padding: 14px;
      border-radius: 16px;
      background: #ecf0f3;
      box-shadow: inset 4px 4px 8px #c9ccd1,
                  inset -4px -4px 8px #ffffff;
      font-size: 14px;
      line-height: 1.6;
    }

    .value { font-weight: 700; color: #2f5bea; }
    .power { font-weight: 700; color: #d93025; }

    /* ===== MODAL K·∫æT QU·∫¢ ===== */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.35);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal.active { display: flex; }

    .modal-box {
      background: #ecf0f3;
      border-radius: 22px;
      padding: 22px;
      width: 90%;
      max-width: 360px;
      box-shadow: 14px 14px 28px #c9ccd1,
                  -14px -14px 28px #ffffff;
    }

    .modal-title {
      text-align: center;
      font-weight: 600;
      margin-bottom: 14px;
    }

    .modal-result {
      font-size: 14px;
      line-height: 1.6;
      margin-bottom: 16px;
    }

    .close-btn {
      width: 100%;
      padding: 12px;
      border-radius: 16px;
      border: none;
      background: #5b8cff;
      color: #fff;
      font-weight: 600;
      cursor: pointer;
    }
  </style>
</head>

<body>

<div class="card">
  <h2>üîå LED Calculator</h2>

  <!-- CHI·ªÄU D√ÄI & S·ªê L∆Ø·ª¢NG -->
  <label>Chi·ªÅu d√†i (m) | S·ªë l∆∞·ª£ng ƒë√®n</label>
  <div class="row">
    <div>
      <input type="number" id="length" value="0" step="0,01" placeholder="Chi·ªÅu d√†i (m)">
    </div>
    <div>
      <input type="number" id="qty" value="1" placeholder="S·ªë l∆∞·ª£ng">
    </div>
  </div>

  <!-- S·ªê ƒê∆Ø·ªúNG LED -->
  <label>S·ªë ƒë∆∞·ªùng LED</label>
  <div class="row">
    <div>
      <select id="lineSuggest" onchange="applyLine()">
        <option value="">‚Äî G·ª£i √Ω theo chi·ªÅu r·ªông ‚Äî</option>
        <option value="1">‚â§ 60mm ‚Üí 1 ƒë∆∞·ªùng</option>
        <option value="2">61‚Äì200mm ‚Üí 2 ƒë∆∞·ªùng</option>
        <option value="3">&gt; 200mm ‚Üí 3 ƒë∆∞·ªùng</option>
      </select>
    </div>
    <div>
      <input type="number" id="lines" value="1">
    </div>
  </div>

  <!-- LO·∫†I LED -->
  <label>Lo·∫°i LED | C√¥ng su·∫•t</label>
  <div class="row">
    <div>
      <select id="ledType" onchange="applyLed()">
        <option value="">‚Äî Ch·ªçn lo·∫°i LED ‚Äî</option>
        <option value="20">2835-10MM-240D ‚Äî 20W/m</option>
        <option value="20">2835-15MM-240D ‚Äî 20W/m</option>
        <option value="28">2835-20MM-276D ‚Äî 28W/m</option>
        <option value="28">2835-30MM-280D ‚Äî 28W/m</option>
        <option value="36">2835-12MM-360D ‚Äî 36W/m</option>
        <option value="36">2835-15MM-360D ‚Äî 36W/m</option>
        <option value="36">2835-30MM-360D ‚Äî 36W/m</option>
        <option value="48">2835-15MM-480D ‚Äî 48W/m</option>
        <option value="48">2835-40MM-480D ‚Äî 48W/m</option>
        <option value="60">2835-50MM-600D ‚Äî 60W/m</option>
      </select>
    </div>
    <div>
      <input type="number" id="powerPerM" value="20" placeholder="W/m">
    </div>
  </div>

  <label>C√¥ng su·∫•t 1 ngu·ªìn (W)</label>
  <input type="number" id="psu" value="200">

  <label>C√¥ng su·∫•t ngu·ªìn s·ª≠ d·ª•ng (%)</label>
  <input type="number" id="loadPercent" value="80">

  <button onclick="calculate()">T√≠nh to√°n</button>

  <div class="result">
    <div>T·ªïng chi·ªÅu d√†i LED: <span class="value" id="rLength">‚Äì</span></div>
    <div>T·ªïng c√¥ng su·∫•t LED: <span class="value" id="rPower">‚Äì</span></div>
    <div>S·ªë ngu·ªìn <span class="power" id="rPsu">‚Äì</span>:
      <span class="value" id="rQty">‚Äì</span>
    </div>
  </div>
</div>

<!-- POPUP K·∫æT QU·∫¢ -->
<div class="modal" id="resultModal">
  <div class="modal-box">
    <div class="modal-title">üìä K·∫øt qu·∫£ t√≠nh to√°n</div>
    <div class="modal-result" id="modalContent"></div>
    <button class="close-btn" onclick="closeModal()">ƒê√≥ng</button>
  </div>
</div>

<script>
function applyLed() {
  const power = ledType.value;
  if (power) powerPerM.value = power;
}

function applyLine() {
  const line = lineSuggest.value;
  if (line) lines.value = line;
}


function calculate() {
  const length = +document.getElementById("length").value;
  const qty = +document.getElementById("qty").value;
  const lines = +document.getElementById("lines").value;
  const powerPerM = +document.getElementById("powerPerM").value;
  const psu = +document.getElementById("psu").value;
  const load = +document.getElementById("loadPercent").value;

  const totalLength = Math.ceil(length * qty * lines);
  const totalPower = Math.ceil(totalLength * powerPerM);

  // ‚úÖ LOGIC ƒê√öNG
  const requiredPsuPower = totalPower / (load / 100);
  const totalPsu = Math.ceil(requiredPsuPower / psu);

  rLength.innerText = totalLength + " m";
  rPower.innerText = totalPower + " W";
  rPsu.innerText = psu + "W (" + load + "%)";
  rQty.innerText = totalPsu + " c·ª•c";

  modalContent.innerHTML = `
    T·ªïng chi·ªÅu d√†i LED: <b>${totalLength} m</b><br>
    T·ªïng c√¥ng su·∫•t LED: <b>${totalPower} W</b><br>
    C√¥ng su·∫•t ngu·ªìn y√™u c·∫ßu: <b>${Math.ceil(requiredPsuPower)} W</b><br>
    S·ªë ngu·ªìn c·∫ßn d√πng: <b>${totalPsu} c·ª•c</b>
  `;

  resultModal.classList.add("active");
}

function closeModal() {
  resultModal.classList.remove("active");
}
</script>

</body>
</html>
